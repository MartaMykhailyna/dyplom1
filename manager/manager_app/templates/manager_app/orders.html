{% extends "manager_app/tables.html" %}
{% block title %}Orders{% endblock %}
{% block table %}
    <thead>
        <tr>
            <th>№</th>
            <th>ID Взуття</th>
            <th>Назва</th>
            <th>Колір</th>
            <th>Модель</th>
            <th>Розмір</th>
            <th>Ціна</th>
            <th>Кількість</th>
            <th>Сума</th>
            <th>Отримувач</th>
            <th>Коментар</th>
            <th>Статус</th>
            <th>Керування</th>
        </tr>
    </thead>
    <tbody>
    {% for item in data %}
        <tr>
            <td>{{ item.id_order }}</td>
            <td>{{ item.o_shoes.id_shoes }}</td>
            <td>
                <a 
                href="#" 
                class="open-modal" 
                data-action="{% url 'orders-detail' item.o_shoes.id_shoes %}"
                data-id="{{ item.id_order }}" 
                data-name="{{ item.o_shoes.sh_name }}" 
                data-model="{{ item.o_shoes.sh_model }}" 
                data-size="{{ item.o_shoes.sh_size }}" 
                data-color="{{ item.o_shoes.sh_color }}" 
                data-count="{{ item.o_count }}" 
                data-sum="{{ item.order_sum }}"
                data-recipient="{{ item.o_recipient }}"
                data-address="{{ item.o_address }}"
                data-comment="{{item.o_comment}}"
                data-status="{{ item.o_status }}"
                data-username="{{ item.o_user.u_username }}"
                onclick="openModal(event); return false;">{{ item.o_shoes.sh_name }}
              </a>
            </td>
            <td>{{ item.o_shoes.sh_color }}</td>
            <td>{{ item.o_shoes.sh_model }}</td>
            <td>{{ item.o_shoes.sh_size }}</td>
            <td>{{ item.o_shoes.sh_price }}</td>
            <td>{{ item.o_count }}</td>
            <td>{{ item.order_sum }}</td>
            <td>{{ item.o_recipient }}</td>
            <td>{{ item.o_comment }}</td>
            <td>
                {% if item.o_status == 'accepted' %}
                    <div class=""><span>Прийнято</span></div>
                {% elif item.o_status == 'paid' %}
                    <div class=""><span>Оплачено</span></div>
                {% elif item.o_status == 'in_processing' %}
                    <div class=""><span>В обробці</span></div>
                {% elif item.o_status == 'shipped' %}
                    <div class=""><span>Відправлено</span></div>
                {% elif item.o_status == 'delivered' %}
                    <div class=""><span>Доставлено</span></div>
                {% else %}
                    <div class=""><span>Оплачено поставнику</span></div>
                {% endif %}
            </td>
            <td class="table-controls" style="min-width: 30px">
                <!-- <button onclick="openModalForm(event);return false;" class="btn-edit"><i class="fa-regular fa-pen-to-square"></i></button> -->
                <!-- <button class="btn-edit"><i class="fa-regular fa-pen-to-square"></i></button> -->
                <div class="btn-edit">
                    <a href="{% url 'update-order' item.id_order %}">
                      <i class="fa-regular fa-pen-to-square"></i>
                    </a>
                  </div>
                <button class="btn-delete">
                    <form action="{% url 'orders-delete' item.id_order %}" method="post">
                        {% csrf_token %}
                        <button type="submit" style="background:none; border:none; padding:0; margin:0;">
                            <i class="fa-solid fa-trash-can"></i>
                        </button>
                    </form>
                </button>
                <button class="btn-confirm">
                    
                        <button type="submit" style="background: none; border: none;">
                            <i class="fa-regular fa-circle-check"></i>
                        </button>
                    <!-- </form> -->
                </button>
              </td>                

        </tr>
            {% endfor %}
        </tbody>
{% endblock %}

  
{% block modals-detailed-view %}
        
<div id="modal" class="mw-container-item-detail">
  <div class="mw-item-detail-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <!-- <div class="carousel-container">
          <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
              <div class="carousel-inner">
              {% for p in photos %}
              <div class="carousel-item {% if forloop.first %}active{% endif %}">
                  <img src="{{ p.images.url }}" alt="" width="300px" height="300px">
              </div>
              {% endfor %}
              </div>
              <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
              </a>
              <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
              </a>
          </div>
      </div> -->
      <div class="mw-di-second-column-container">
          <h1>{{ item.o_shoes.sh_name }}</h1>
          <p>ID: {{ item.id_order }}</p>
          <p>Модель: {{ item.shoes.sh_model }}</p>
          <p>Розмір {{ item.shoes.sh_size }}</p>
          <p>Колір: {{ item.shoes.sh_color }}</p>
          <p>Кількість: {{ item.shoes.sh_count }}</p>
          <p>Виробник: {{ item.shoes.sh_manufacturer }}</p>
          <p>Сума: £{{ item.order_sum }}</p>
          <p>Отримувач: {{ item.o_recipient }}</p>
          <p>Адреса: {{ item.o_address }}</p>
          <p>Коментар: {{ item.o_comment }}</p>
          <p>Користувач: {{ item.o_user.u_username }}</p>
          
      </div>
   </div>
</div>

{% endblock %}